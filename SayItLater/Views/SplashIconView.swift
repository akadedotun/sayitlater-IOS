//
//  SplashIconView.swift
//  SayItLater
//
//  Created by Ayodimeji Adedotun on 06/01/2026.
//

import SwiftUI

struct SplashIconView: View {
    var body: some View {
        SplashIconShape()
            .fill(Color.appText)
            .frame(width: 163, height: 166)
    }
}

struct SplashIconShape: Shape {
    func path(in rect: CGRect) -> Path {
        let svgPathString = "M94.0977 165.453C92.4116 165.445 90.7372 165.173 89.136 164.645C87.4519 164.091 85.8607 163.288 84.4156 162.261C82.4624 160.859 80.7513 159.148 79.3496 157.195C77.7642 154.982 76.4627 152.58 75.4757 150.043C75.2611 149.507 75.0624 148.964 74.8797 148.416C74.686 147.868 74.5072 147.316 74.3224 146.759C73.4344 148.619 71.9056 150.28 69.7362 151.745C67.5667 153.209 64.7606 154.474 61.3177 155.541C60.0005 155.946 58.6357 156.325 57.2619 156.611C55.9063 156.905 54.527 157.077 53.1405 157.123C52.7559 157.303 52.3572 157.45 51.9486 157.565C51.5445 157.677 51.1319 157.757 50.7148 157.803C50.5905 157.923 50.4488 158.023 50.2947 158.101C50.1326 158.182 49.9601 158.24 49.7821 158.274C49.4433 158.342 49.0927 158.324 48.7629 158.22C48.459 158.128 48.19 157.946 47.9911 157.699C47.8272 157.496 47.7239 157.251 47.6931 156.992C47.6701 156.728 47.7174 156.461 47.8302 156.221C47.5245 156.091 47.2261 155.945 46.9362 155.782C46.6377 155.619 46.3482 155.44 46.069 155.246C45.2644 154.682 44.5397 154.011 43.9145 153.252C43.319 152.536 42.7837 151.772 42.3142 150.967C41.6836 151.288 41.0337 151.569 40.3683 151.81C39.7213 152.044 39.0592 152.233 38.3866 152.376C37.1472 152.638 35.8837 152.769 34.6169 152.767C31.4107 152.758 28.2561 151.958 25.4325 150.439C22.5902 148.931 20.1814 146.72 18.4355 144.017C17.5584 142.693 16.9648 141.202 16.6922 139.637C16.4543 138.314 16.6054 136.951 17.1272 135.712C16.7254 135.107 16.3631 134.477 16.0425 133.826C15.7334 133.193 15.4675 132.54 15.2469 131.871C14.8574 130.675 14.5782 129.446 14.4125 128.2C14.2484 126.954 14.1737 125.698 14.189 124.442C13.2796 123.317 12.5645 122.048 12.0732 120.687C11.5942 119.367 11.2167 118.012 10.9437 116.634C10.7947 115.94 10.6457 115.195 10.5265 114.411C10.4073 113.627 10.3001 112.811 10.2285 111.971C9.18579 111.49 8.20682 110.881 7.31411 110.159C6.4546 109.462 5.69636 108.648 5.06123 107.742C4.17117 106.429 3.61566 104.918 3.44309 103.34C3.24486 101.717 3.42226 100.069 3.96161 98.5248C4.2927 97.5696 4.78562 96.6785 5.41883 95.8904C6.01133 95.149 6.73947 94.527 7.56443 94.0577C6.767 93.7913 6.00147 93.4375 5.28175 93.0028C4.56333 92.5695 3.89822 92.0534 3.30005 91.4651C1.86254 90.0063 0.841859 88.1892 0.344021 86.2026C-0.153816 84.216 -0.110644 82.1323 0.469049 80.168C1.29451 77.5038 2.93947 75.4506 4.97481 73.7133C7.01015 71.9759 9.46567 70.5366 11.8497 69.1539C12.3384 68.8559 12.8331 68.5787 13.3218 68.2867C13.8105 67.9947 14.2992 67.6907 14.7671 67.3927C15.0383 67.2228 15.3065 67.047 15.5717 66.8712C15.8369 66.6954 16.1021 66.5166 16.3644 66.3318C16.4603 65.605 16.6036 64.8853 16.7935 64.1773C16.9871 63.4606 17.2259 62.7569 17.5087 62.0704C17.5593 61.2956 17.6189 60.5238 17.6785 59.752C17.7381 58.9802 17.8097 58.2113 17.8782 57.4395C17.9837 56.2907 18.1468 55.1479 18.3669 54.0155C18.6105 52.7433 18.9522 51.492 19.3891 50.2726C19.1954 49.8912 19.0136 49.5008 18.8467 49.1015C18.6798 48.7021 18.5249 48.2939 18.3848 47.8826C16.723 48.5366 15.2047 49.5083 13.9148 50.7434C12.492 52.0841 11.1619 53.5198 9.93353 55.0406C8.09189 57.2458 6.28601 59.5315 5.00163 61.9214C4.32307 63.1518 3.81005 64.4664 3.47587 65.8312C3.31727 66.4956 3.21755 67.1727 3.17787 67.8546C3.13913 68.6383 3.52653 69.7648 2.69809 70.2684C2.44453 70.4118 2.14584 70.4531 1.8629 70.3839C1.57995 70.3147 1.33404 70.1401 1.17531 69.8959C1.03782 69.5716 0.980578 69.2189 1.00843 68.8678C0.992537 68.4137 1.00049 67.9592 1.03227 67.5059C1.18426 65.7078 1.64918 63.95 2.40605 62.3118C2.5928 61.8946 2.79146 61.4834 3.00205 61.0781C4.40265 58.3961 6.35455 55.9286 8.25579 53.6519C9.59275 51.9954 11.0489 50.4387 12.6125 48.9942C14.12 47.6014 15.8856 46.5171 17.8097 45.8026C17.8097 45.7817 17.8097 45.7579 17.7948 45.7341C17.7799 45.7102 17.7948 45.6894 17.7799 45.6655C17.3091 43.4612 17.2666 41.1869 17.6547 38.9665C18.021 36.8535 18.8337 34.843 20.0387 33.0691C20.5174 32.3725 21.0623 31.7238 21.6658 31.1321C22.4162 30.3892 23.2816 29.7724 24.2286 29.3053C23.8442 28.902 23.4952 28.4663 23.1856 28.0031C22.8773 27.5473 22.611 27.0646 22.3899 26.5607C21.9646 25.6109 21.7335 24.5855 21.7105 23.545C21.6953 22.5591 21.8989 21.582 22.3065 20.6842C22.37 20.5464 22.4427 20.413 22.524 20.2849C22.6002 20.1612 22.6859 20.0436 22.7803 19.9332C23.1717 19.4601 23.7096 19.1308 24.309 18.9975C25.0749 18.8366 26.097 18.9766 27.3993 19.8915C28.875 20.9196 30.1777 22.176 31.2584 23.6135C32.3655 25.1028 33.2462 26.7477 33.8719 28.4948C33.9493 26.224 34.748 23.8787 36.2559 20.9792C37.7637 18.0797 40.0077 14.6288 42.9519 10.1469C43.4389 9.36732 44.026 8.65498 44.6982 8.02812C45.4023 7.37105 46.2963 6.95377 47.2521 6.83612C47.7403 6.78389 48.234 6.82024 48.7093 6.9434C49.1733 7.06632 49.6184 7.25178 50.0324 7.4947C50.9539 6.76944 52.015 6.24193 53.1495 5.9451C54.341 5.62798 55.5821 5.542 56.8059 5.6918C58.152 5.84345 59.4429 6.31222 60.5727 7.05962C61.6291 7.75879 62.4742 8.73368 63.0163 9.8787C63.592 11.144 63.844 12.5327 63.7494 13.9196C63.641 15.4787 63.2364 17.0028 62.5574 18.4104L63.1295 18.8694L63.6868 19.3164L63.8834 19.4743L64.0801 19.6322C64.2007 18.8077 64.381 17.993 64.6195 17.1946C64.8654 16.3949 65.2161 15.6314 65.6625 14.9238C66.4649 13.719 67.5256 12.7081 68.7677 11.9647C69.8989 11.2809 71.0971 10.7148 72.3437 10.275C72.749 10.1231 73.1602 9.97704 73.5744 9.84294C73.9886 9.70884 74.4028 9.57474 74.8201 9.44958C74.7922 8.90126 74.7684 8.35294 74.7485 7.80462C74.7277 7.2563 74.7098 6.705 74.6979 6.15668C74.6333 5.1845 74.7269 4.20828 74.975 3.26608C75.15 2.67462 75.4492 2.12731 75.8526 1.6607C76.2561 1.19409 76.7544 0.818918 77.3143 0.56024C78.056 0.194677 78.8714 0.00307303 79.6983 0C80.5541 0.000681912 81.3997 0.185662 82.1777 0.54236C83.6673 1.22031 84.9898 2.21728 86.0517 3.46276C87.1399 4.75306 87.9513 6.25323 88.4357 7.87018C89.6753 7.93872 90.912 8.06686 92.1368 8.24864C93.3616 8.43042 94.5804 8.67478 95.7814 8.97576C97.2168 9.3355 98.6072 9.8553 99.9265 10.5254C101.164 11.1459 102.317 11.9231 103.357 12.8378C104.485 13.8108 105.378 15.0275 105.967 16.396C106.482 17.6414 106.636 19.0067 106.411 20.3355C106.217 21.4408 105.813 22.4989 105.222 23.4526C104.626 24.3963 103.958 25.2929 103.225 26.1346L102.927 26.4862L102.629 26.8349V27.0286C102.629 27.0852 102.629 27.1418 102.629 27.1955C102.629 27.3028 102.629 27.41 102.612 27.5143C102.594 27.6186 102.594 27.7229 102.582 27.8123L106.831 28.3428L111.084 28.8732C111.683 27.7911 112.418 26.7897 113.271 25.8932C114.127 24.9963 115.154 24.2808 116.293 23.7893C116.658 23.6338 117.039 23.516 117.428 23.4377C117.831 23.3548 118.241 23.3099 118.653 23.3036H118.912H119.165C119.295 23.0808 119.44 22.8668 119.598 22.6629C119.755 22.4599 119.926 22.2668 120.107 22.0848C121.078 21.1044 122.368 20.504 123.743 20.3921C124.501 20.3482 125.26 20.4681 125.968 20.7438C126.677 21.0194 127.317 21.4442 127.846 21.9894C128.322 22.4498 128.773 22.9342 129.199 23.4407C129.624 23.9439 130.022 24.4691 130.391 25.0141C130.486 25.1512 130.576 25.2913 130.668 25.4313C130.761 25.5714 130.847 25.7293 130.933 25.8575C131.545 25.4429 132.221 25.1318 132.933 24.9366C133.637 24.7411 134.371 24.6715 135.1 24.731C135.945 24.8006 136.757 25.0915 137.454 25.5744C138.141 26.061 138.685 26.7226 139.03 27.4905C139.505 28.5327 139.629 29.7004 139.385 30.8192C139.131 31.9639 138.533 33.0037 137.671 33.7992C137.193 34.2505 136.655 34.6354 136.074 34.9435C135.496 35.2499 134.881 35.4803 134.244 35.6289C134.357 36.5229 134.432 37.4556 134.462 38.3913C134.492 39.3271 134.483 40.2717 134.429 41.2313C135.75 42.2452 136.912 43.4505 137.877 44.8073C138.855 46.1785 139.614 47.6935 140.127 49.2981C140.676 49.4976 141.239 49.6589 141.81 49.7809C142.37 49.8991 142.938 49.9767 143.509 50.0133C143.458 49.7153 143.408 49.3905 143.369 49.0746C143.33 48.7588 143.286 48.4846 143.268 48.1866C143.191 46.8601 143.424 45.5339 143.947 44.3126C144.41 43.1464 145.166 42.1198 146.143 41.3326C146.725 40.876 147.409 40.569 148.137 40.4386C148.847 40.3229 149.575 40.3927 150.25 40.6412C151.203 40.9862 152.013 41.6409 152.55 42.5008C153.106 43.3805 153.371 44.4125 153.307 45.451C153.221 47.066 152.505 48.5828 151.314 49.6766C150.21 50.6851 148.882 51.4165 147.44 51.8103C147.219 51.8729 146.999 51.9265 146.775 51.9772C146.552 52.0278 146.328 52.0695 146.105 52.1053C146.315 53.1061 146.452 54.1211 146.513 55.1419C146.57 56.1819 146.45 57.2241 146.155 58.2232C145.873 59.1626 145.413 60.0388 144.799 60.8039C144.194 61.5513 143.469 62.1937 142.654 62.7052C143.15 64.1577 143.234 65.7196 142.895 67.2169C142.549 68.8336 141.817 70.3426 140.761 71.6154C140.129 72.3716 139.416 73.0562 138.634 73.6567C137.89 74.2243 137.103 74.7325 136.28 75.1765C136.387 75.2688 136.494 75.3582 136.607 75.4417C136.721 75.5251 136.837 75.6056 136.956 75.686C138.166 76.4757 139.918 76.8959 142.022 76.5473C144.126 76.1986 146.605 75.0811 149.252 72.7984C149.265 67.8988 150.152 63.0409 151.871 58.4527C152.127 57.7017 152.487 56.9905 152.941 56.3399C153.234 55.9199 153.608 55.5618 154.04 55.2862C154.472 55.0106 154.954 54.8229 155.459 54.7337C156.368 54.581 157.302 54.7451 158.105 55.1985C158.93 55.6609 159.584 56.3767 159.971 57.2398C160.582 58.6262 160.675 60.1861 160.233 61.6353C159.812 62.9898 159.187 64.2721 158.379 65.4378C156.487 68.3375 154.274 71.0145 151.782 73.4183L151.606 73.5881L151.427 73.755C151.454 74.8785 151.528 76.0138 151.633 77.1492C151.737 78.2846 151.868 79.42 152.011 80.5434C152.619 80.7367 153.216 80.9625 153.799 81.2199C154.386 81.4824 154.956 81.781 155.507 82.1139C158.178 83.7922 160.245 86.2786 161.407 89.2118C162.569 92.1449 162.765 95.3722 161.968 98.4247C161.17 101.477 159.421 104.196 156.972 106.186C154.524 108.176 151.506 109.334 148.355 109.491H148.131H147.911C147.496 111.911 146.892 114.294 146.105 116.619C145.275 119.06 144.274 121.438 143.107 123.736C144.306 126.051 145.267 128.482 145.977 130.992C146.688 133.509 147.139 136.092 147.32 138.701C147.403 139.728 147.413 140.76 147.35 141.788C147.279 142.947 147.045 144.09 146.653 145.183C145.461 148.401 142.883 150.439 140.201 151.739C137.947 152.778 135.547 153.466 133.085 153.78C130.572 154.13 128.027 154.19 125.501 153.959C123.216 153.748 120.972 153.222 118.832 152.394L118.373 152.811L117.911 153.229C116.927 154.123 115.876 155.067 114.731 155.946C113.577 156.857 112.319 157.631 110.985 158.25C110.188 158.609 109.362 158.898 108.515 159.114C107.681 159.326 106.832 159.474 105.976 159.555C105.041 160.512 104.045 161.407 102.996 162.237C101.903 163.109 100.701 163.834 99.4199 164.395C98.5882 164.745 97.7224 165.009 96.8363 165.181C95.9343 165.36 95.0171 165.451 94.0977 165.453Z"
        
        return parseSVGPath(svgPathString, in: rect)
    }
    
    private func parseSVGPath(_ pathString: String, in rect: CGRect) -> Path {
        var path = Path()
        let scaleX = rect.width / 163
        let scaleY = rect.height / 166
        
        var currentPoint = CGPoint.zero
        var startPoint = CGPoint.zero
        
        // Parse the path string character by character
        var i = pathString.startIndex
        while i < pathString.endIndex {
            let char = pathString[i]
            
            switch char {
            case "M", "m": // Move to
                i = pathString.index(after: i)
                if let (point, newIndex) = parsePoint(pathString, from: i, scaleX: scaleX, scaleY: scaleY, relative: char == "m", currentPoint: currentPoint) {
                    currentPoint = point
                    startPoint = point
                    path.move(to: point)
                    i = newIndex
                }
                
            case "C", "c": // Cubic Bezier curve
                i = pathString.index(after: i)
                if let (cp1, cp2, end, newIndex) = parseCubicBezier(pathString, from: i, scaleX: scaleX, scaleY: scaleY, relative: char == "c", currentPoint: currentPoint) {
                    path.addCurve(to: end, control1: cp1, control2: cp2)
                    currentPoint = end
                    i = newIndex
                }
                
            case "L", "l": // Line to
                i = pathString.index(after: i)
                if let (point, newIndex) = parsePoint(pathString, from: i, scaleX: scaleX, scaleY: scaleY, relative: char == "l", currentPoint: currentPoint) {
                    path.addLine(to: point)
                    currentPoint = point
                    i = newIndex
                }
                
            case "Z", "z": // Close path
                path.closeSubpath()
                currentPoint = startPoint
                i = pathString.index(after: i)
                
            default:
                i = pathString.index(after: i)
            }
        }
        
        return path
    }
    
    private func parsePoint(_ string: String, from index: String.Index, scaleX: CGFloat, scaleY: CGFloat, relative: Bool, currentPoint: CGPoint) -> (CGPoint, String.Index)? {
        var i = index
        while i < string.endIndex && (string[i].isWhitespace || string[i] == ",") {
            i = string.index(after: i)
        }
        
        guard i < string.endIndex else { return nil }
        
        var numbers: [Double] = []
        var currentNumber = ""
        
        while i < string.endIndex {
            let char = string[i]
            if char.isNumber || char == "." || char == "-" || char == "e" || char == "E" || char == "+" {
                currentNumber.append(char)
            } else if !currentNumber.isEmpty {
                if let num = Double(currentNumber) {
                    numbers.append(num)
                }
                currentNumber = ""
                if char.isLetter && char.isUppercase {
                    break
                }
            }
            if char.isLetter && char.isUppercase && !currentNumber.isEmpty {
                break
            }
            i = string.index(after: i)
        }
        
        if !currentNumber.isEmpty, let num = Double(currentNumber) {
            numbers.append(num)
        }
        
        guard numbers.count >= 2 else { return nil }
        
        let x = CGFloat(numbers[0]) * scaleX
        let y = CGFloat(numbers[1]) * scaleY
        
        let point = relative ? CGPoint(x: currentPoint.x + x, y: currentPoint.y + y) : CGPoint(x: x, y: y)
        
        return (point, i)
    }
    
    private func parseCubicBezier(_ string: String, from index: String.Index, scaleX: CGFloat, scaleY: CGFloat, relative: Bool, currentPoint: CGPoint) -> (CGPoint, CGPoint, CGPoint, String.Index)? {
        var i = index
        while i < string.endIndex && (string[i].isWhitespace || string[i] == ",") {
            i = string.index(after: i)
        }
        
        guard i < string.endIndex else { return nil }
        
        var numbers: [Double] = []
        var currentNumber = ""
        
        while i < string.endIndex && numbers.count < 6 {
            let char = string[i]
            if char.isNumber || char == "." || char == "-" || char == "e" || char == "E" || char == "+" {
                currentNumber.append(char)
            } else if !currentNumber.isEmpty {
                if let num = Double(currentNumber) {
                    numbers.append(num)
                }
                currentNumber = ""
                if char.isLetter && char.isUppercase {
                    break
                }
            }
            if char.isLetter && char.isUppercase && !currentNumber.isEmpty {
                break
            }
            i = string.index(after: i)
        }
        
        if !currentNumber.isEmpty, let num = Double(currentNumber) {
            numbers.append(num)
        }
        
        guard numbers.count >= 6 else { return nil }
        
        let cp1x = CGFloat(numbers[0]) * scaleX
        let cp1y = CGFloat(numbers[1]) * scaleY
        let cp2x = CGFloat(numbers[2]) * scaleX
        let cp2y = CGFloat(numbers[3]) * scaleY
        let endx = CGFloat(numbers[4]) * scaleX
        let endy = CGFloat(numbers[5]) * scaleY
        
        let cp1 = relative ? CGPoint(x: currentPoint.x + cp1x, y: currentPoint.y + cp1y) : CGPoint(x: cp1x, y: cp1y)
        let cp2 = relative ? CGPoint(x: currentPoint.x + cp2x, y: currentPoint.y + cp2y) : CGPoint(x: cp2x, y: cp2y)
        let end = relative ? CGPoint(x: currentPoint.x + endx, y: currentPoint.y + endy) : CGPoint(x: endx, y: endy)
        
        return (cp1, cp2, end, i)
    }
}

#Preview {
    SplashIconView()
        .background(Color.appBackground)
}
